<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sistema de Caja - Gustitos Pizza Valdivia</title>

  <!-- Bootstrap + FontAwesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    :root{
      --gustitos-red:#c62828;
      --gustitos-red-hover:#e53935;
      --bg-dark:#1e1e1e;
      --card:#2a2a2a;
      --input:#333;
      --text:#f5f5f5;
      --muted:#ccc;
    }

    html,body{background-color:var(--bg-dark); color:var(--text);}

    /* Navbar */
    .navbar{ background-color:var(--gustitos-red) !important; }
    .navbar .navbar-brand, .navbar .nav-link{ color:#fff !important; }
    .navbar .nav-link:hover{ background:var(--gustitos-red-hover); color:#fff!important; border-radius:6px; }
    .dropdown-menu{ background:var(--card); border:1px solid var(--gustitos-red); }
    .dropdown-item{ color:#fff; }
    .dropdown-item:hover{ background:var(--gustitos-red-hover); color:#fff; }

    /* Cards / layout */
    .card{ background:var(--card); border:1px solid var(--gustitos-red); border-radius:12px; }
    .card h2{ color:var(--gustitos-red); font-weight:700; }

    /* Inputs */
    .form-control, .form-select{
      background:var(--input); color:#fff; border:1px solid #444;
    }
    .form-control::placeholder{ color:#888; }
    .form-control:focus, .form-select:focus{
      background:#2a2a2a; color:#fff; border-color:var(--gustitos-red-hover);
      box-shadow: 0 0 0 .2rem rgba(229,57,53,.25);
    }
    label{ color:var(--muted); font-weight:600; }

    /* Buttons */
    .btn-red{
      background:var(--gustitos-red); color:#fff; border:none;
    }
    .btn-red:hover{ background:var(--gustitos-red-hover); color:#fff; }
    .btn-ghost{
      background:transparent; color:#f5f5f5; border:1px solid #555;
    }
    .btn-ghost:hover{ background:#444; }

    /* Tables */
    table{ color:#fff; }
    thead{ background:var(--gustitos-red); color:#fff; }
    tbody tr:nth-child(even){ background:#2a2a2a; }

    /* Helpers */
    .page-title{ font-weight:800; letter-spacing:.5px; }
  </style>
</head>
<body>
 <!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark" 
     style="background: linear-gradient(90deg, #b71c1c, #7f0000); box-shadow: 0px 3px 6px rgba(0,0,0,0.5);">
  <div class="container-fluid">

    <!-- Logo + Nombre -->
    <a class="navbar-brand fw-bold d-flex align-items-center" href="{{ url_for('index') }}">
      <i class="fa-solid fa-pizza-slice text-warning me-2" style="font-size: 1.5rem;"></i>
      <span style="letter-spacing: 1px;">Gustitos</span>
    </a>

    <!-- Botón Responsive -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Links -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">

  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownVer"
       role="button" data-bs-toggle="dropdown" aria-expanded="false">
      Ver
    </a>
    <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDropdownVer">
      <li>
        <a class="dropdown-item" href="{{ url_for('planilla_caja') }}">
          Planilla Caja
        </a>
      </li>
      <li>
        <a class="dropdown-item" href="{{ url_for('planilla_repartos') }}">
          Planilla Repartos
        </a>
      </li>
      <li>
        <a class="dropdown-item" href="{{ url_for('planilla_egresos') }}">
          Planilla Egresos
        </a>
      </li>
    </ul>
  </li>

        <!-- Dropdown Formularios -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle fw-semibold" href="#" id="navbarDropdown" role="button" 
             data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fa-solid fa-plus me-1"></i> Formularios
          </a>
          <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="{{ url_for('agregar_venta') }}"><i class="fa-solid fa-pizza-slice me-1"></i> Agregar Venta</a></li>
            <li><a class="dropdown-item" href="{{ url_for('agregar_reparto') }}"><i class="fa-solid fa-motorcycle me-1"></i> Agregar Reparto</a></li>
            <li><a class="dropdown-item" href="{{ url_for('agregar_egreso') }}"><i class="fa-solid fa-receipt me-1"></i> Agregar Egreso</a></li>
            <li><a class="dropdown-item" href="{{ url_for('agregar_merma') }}"><i class="fa-solid fa-pizza-slice me-1"></i> Agregar Merma</a></li>
            <li><a class="dropdown-item" href="{{ url_for('agregar_desglose') }}"><i class="fa-solid fa-money-bill-wave me-1"></i> Agregar Desglose</a></li>
            <li><a class="dropdown-item" href="{{ url_for('agregar_cortesia') }}"><i class="fa-solid fa-gift me-1"></i> Agregar Cortesía</a></li>
          </ul>
        </li>

        <li class="nav-item">
          <a class="nav-link fw-semibold" href="{{ url_for('descargar_actual') }}">
            <i class="fa-solid fa-download me-1"></i> Descargar Actual
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link fw-semibold" href="{{ url_for('cierre_caja') }}">
            <i class="fa-solid fa-lock me-1"></i> Cierre de Caja
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link fw-semibold" href="{{ url_for('historial_cierres') }}">
            <i class="fa-solid fa-folder-open me-1"></i> Historial Cierres
          </a>
        </li>

      </ul>
    </div>
  </div>
</nav>

  <!-- Notificaciones (Paso 2) -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="container mt-3">
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show shadow-lg" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <!-- Contenido -->
  <div class="container my-4">
    {% block content %}{% endblock %}
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
